# 1. linux下一个write()函数的具体过程 
```
1，insmod驱动程序。驱动程序申请设备名和主设备号，这些可以在/proc/devIEces中获得。
2，从/proc/devices中获得主设备号，并使用mknod命令建立设备节点文件。这是通过主
设备号将设备节点文件和设备驱动程序联系在一起。设备节点文件中的file属性中指明了
驱动程序中fops方法实现的函数指针。
3，用户程序使用open打开设备节点文件，这时操作系统内核知道该驱动程序工作了，就
调用fops方法中的open函数进行相应的工作。open方法一般返回的是文件标示符，实际
上并不是直接对它进行操作的，而是有操作系统的系统调用在背后工作。
4，当用户使用write函数操作设备文件时，操作系统调用sys_write函数，该函数首先通
过文件标示符得到设备节点文件对应的inode指针和flip指针。inode指针中有设备号信
息，能够告诉操作系统应该使用哪一个设备驱动程序，flip指针中有fops信息，可以告诉
操作系统相应的fops方法函数在那里可以找到。
5，然后这时sys_write才会调用驱动程序中的write方法来对设备进行写的操作。
其中1-3都是在用户空间进行的，4-5是在核心空间进行的。用户的write函数和操作系统
的write函数通过系统调用sys_write联系在了一起。
注意：
对于块设备来说，还存在写的模式的问题，这应该是由GNU C库来解决的，这里不予讨
论，因为我没有看过GNU C库的源代码。
```
